<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - UniChat</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/login.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>
<body>
<div class="login-form-container">
    <div class="login-header">
        <img src="/static/img/logo.png" alt="unichat_login" class="small-logo">
        <h1>UNICHAT</h1>
        <p>Entre na sua conta</p>
    </div>

    <form method="post" class="login-form">
        {% csrf_token %}
        {% if error %}
            <div class="alert alert-danger">{{ error }}</div>
        {% endif %}

        <div class="form-group">
            {{ form.username.label_tag }}
            {{ form.username }}
        </div>

        <div class="form-group">
            {{ form.password.label_tag }}
            <div class="password-wrapper">
                {{ form.password }}
                <button type="button" id="toggle-password">
                    <i class="fa-solid fa-eye-slash"></i>
                </button>
            </div>
            {% if form.password.errors %}
                <div class="error">{{ form.password.errors }}</div>
            {% endif %}
        </div>

        <div class="form-actions">
            <div class="remember-me">
                {{ form.remember_me }}
                {{ form.remember_me.label_tag }}
            </div>
            <a href="{% url 'password_reset' %}">Esqueci minha senha</a>
        </div>

        <button type="submit">Entrar</button>
    </form>

    <p class="signup-link">NÃ£o tem uma conta? <a href="{% url 'register' %}">Cadastre-se gratuitamente</a></p>
</div>

<script>
const passwordInput = document.getElementById('id_password');
const togglePasswordButton = document.getElementById('toggle-password');
const eyeIcon = togglePasswordButton.querySelector('i');

togglePasswordButton.addEventListener('click', () => {
    const isPassword = passwordInput.type === 'password';
    if (isPassword) {
        passwordInput.type = 'text';
        eyeIcon.classList.remove('fa-eye-slash');
        eyeIcon.classList.add('fa-eye');
    } else {
        passwordInput.type = 'password';
        eyeIcon.classList.remove('fa-eye');
        eyeIcon.classList.add('fa-eye-slash');
    }
});
</script>
</body>
</html>
